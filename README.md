# Novibet Live Schedule Tests

This project contains automated tests to verify live game schedules on the Novibet website.

## Setup

1. **Prerequisites**:
   - Node.js (version 16 or higher)
   - npm (Node.js package manager)

2. **Installation**:
   ```bash
   # Clone the repository
   git clone https://github.com/oAmarilha/Novibet.git
   cd Novibet

   # Install dependencies
   npm install
   ```

3. **Dependencies**:
   - playwright
   - xml2js

## Running the Tests

To run the tests, use the following command:

```bash
npx playwright test
```

To run a specific test:

```bash
npx playwright test live_tests.spec.ts
# or
npx playwright test check_live_events.spec.ts
```

## Test Descriptions

### 1. `live_tests.spec.ts`
This test:
- Navigates to Novibet's live schedule page
- Extracts information about scheduled games
- Saves the data to an XML file (`games_list.xml`)
- The data includes:
  - Game time
  - Home team
  - Away team
  - Odds (home, draw, away)

### 2. `check_live_events.spec.ts`
This test:
- Reads the XML file generated by the first test
- Navigates to the live betting page
- Verifies the status of each scheduled game
- Classifies games as:
  - `scheduled`: Game hasn't started yet
  - `live`: Game in progress
  - `delayed`: Game delayed (more than 1 minute past scheduled time)
  - `dropped`: Game canceled (more than 20 minutes past scheduled time)
  - `not_found`: Game not found on the betting page
- Generates two XML files:
  - `game_statuses.xml`: Complete status of all games
  - `delayed_or_dropped_games_gmt+2.xml`: List of only delayed or canceled games, with times converted to GMT+2

## Test Output

The tests generate the following files:
- `games_list.xml`: Initial list of scheduled games
- `game_statuses.xml`: Updated status of all games
- `delayed_or_dropped_games_gmt+2.xml`: List of delayed or canceled games with times in GMT+2

## Notes

- Tests include handling of modals (age verification, cookies)
- System default time is GMT-3
- Tests are configured to check up to 20 games on the page
- Maximum element wait time is 10 seconds

## Project Structure

```
.
├── live_schedule_tests/
│   ├── live_tests.spec.ts
│   ├── check_live_events.spec.ts
│   └── test_utils.ts
├── package.json
└── README.md
```
